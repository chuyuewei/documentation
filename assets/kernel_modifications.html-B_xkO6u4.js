import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,o as s,d as a}from"./app-ydblb6sM.js";const t={},i=a(`<h1 id="kernel-modifications" tabindex="-1"><a class="header-anchor" href="#kernel-modifications"><span>Kernel Modifications</span></a></h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>In most cases, only users with a server provided by OVH will need to make any modifications to their kernel.</p></div><h2 id="update-kernel" tabindex="-1"><a class="header-anchor" href="#update-kernel"><span>Update Kernel</span></a></h2><p>Install the new kernels using apt-get. In this case we are installing the latest version of the kernel, but feel free to browse using apt-cache search linux-image-extra to find all possible image versions you can install. You&#39;ll want to install the latest.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">apt-get</span> <span class="token function">install</span> linux-image-generic linux-image-extra-virtual</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>After you&#39;ve installed the new kernel you&#39;ll need to update the grub loader using the command below. After that, a server reboot is in order.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">sudo</span> <span class="token function">mv</span> /etc/grub.d/06_OVHkernel /etc/grub.d/96_OVHkernel</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">update-grub</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">reboot</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="confirm-kernel" tabindex="-1"><a class="header-anchor" href="#confirm-kernel"><span>Confirm Kernel</span></a></h2><p>Once you&#39;ve rebooted, check that the latest kernel is installed using <code>uname -r</code>, it should output <code>4.4.0-131-generic</code> (in this case) or similar.</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>If it still includes <code>-xxxx-grs-ipv6-64</code> or similar, it didn&#39;t work and you should move on top the steps below.</p></div><h2 id="set-default-boot" tabindex="-1"><a class="header-anchor" href="#set-default-boot"><span>Set Default Boot</span></a></h2><p>Ok, so unfortunately the easiest way didn&#39;t work, but don&#39;t worry, we can still fix this. Firstly, lets run a quick command to list potential kernels, just look at the output and make sure you see your newly installed kernel listed.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">grep</span> <span class="token string">&quot;menuentry &#39;&quot;</span> /boot/grub/grub.cfg</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>After running that you should see output similar to the example below.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">menuentry &#39;Ubuntu&#39; --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option &#39;gnulinux-simple-ad1a8550-963c-4a9f-b922-85827cf44fbe&#39; {</span>
<span class="line">    menuentry &#39;Ubuntu, with Linux 4.4.0-131-generic&#39; --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option &#39;gnulinux-4.4.0-131-generic-advanced-ad1a8550-963c-4a9f-b922-85827cf44fbe&#39; {</span>
<span class="line">    menuentry &#39;Ubuntu, with Linux 4.4.0-131-generic (recovery mode)&#39; --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option &#39;gnulinux-4.4.0-131-generic-recovery-ad1a8550-963c-4a9f-b922-85827cf44fbe&#39; {</span>
<span class="line">    menuentry &#39;Ubuntu, with Linux 4.4.0-127-generic&#39; --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option &#39;gnulinux-4.4.0-127-generic-advanced-ad1a8550-963c-4a9f-b922-85827cf44fbe&#39; {</span>
<span class="line">    menuentry &#39;Ubuntu, with Linux 4.4.0-127-generic (recovery mode)&#39; --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option &#39;gnulinux-4.4.0-127-generic-recovery-ad1a8550-963c-4a9f-b922-85827cf44fbe&#39; {</span>
<span class="line">    menuentry &#39;Ubuntu, with Linux 4.4.0-116-generic&#39; --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option &#39;gnulinux-4.4.0-116-generic-advanced-ad1a8550-963c-4a9f-b922-85827cf44fbe&#39; {</span>
<span class="line">    menuentry &#39;Ubuntu, with Linux 4.4.0-116-generic (recovery mode)&#39; --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option &#39;gnulinux-4.4.0-116-generic-recovery-ad1a8550-963c-4a9f-b922-85827cf44fbe&#39; {</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As you can see, we have <code>Ubuntu, with Linux 4.4.0-131-generic</code> listed as the first indented option. To boot using this specific kernel, we will need to modify our grub file.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/default/grub</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Find <code>GRUB_DEFAULT</code>, it is most likely set to <code>GRUB_DEFAULT=0</code>. We&#39;re going to modify it a bit to boot our new kernel.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">GRUB_DEFAULT=&#39;Advanced options for Ubuntu&gt;Ubuntu, with Linux 4.4.0-131-generic&#39;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>The only part of the code above that you might need to change is the <code>4.4.0-131-generic</code>, which you can find based on the kernel version you install. You might also notice that it matches the first indented entry from the grep menuentry command and also the version of the kernel that we installed above. Once you&#39;ve done that, run the commands below to update grub and reboot, and you should be set.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">sudo</span> <span class="token function">update-grub</span></span>
<span class="line"><span class="token function">sudo</span> <span class="token function">reboot</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="boot-from-hard-disk" tabindex="-1"><a class="header-anchor" href="#boot-from-hard-disk"><span>Boot from hard disk</span></a></h2><p>It&#39;s possible that even after you modified the GRUB configuration the server&#39;s still booted into a OVH kernel. If this happens to you, go to the OVH control panel and check the server&#39;s booting settings and make sure it&#39;s booting from hard disk instead of network boot.</p>`,23),l=[i];function o(r,d){return s(),n("div",null,l)}const p=e(t,[["render",o],["__file","kernel_modifications.html.vue"]]),h=JSON.parse('{"path":"/daemon/0.6/kernel_modifications.html","title":"Kernel Modifications","lang":"zh-CN","frontmatter":{"description":"Kernel Modifications 提示 In most cases, only users with a server provided by OVH will need to make any modifications to their kernel. Update Kernel Install the new kernels using ...","head":[["meta",{"property":"og:url","content":"https://pterodactyl.top/daemon/0.6/kernel_modifications.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"Kernel Modifications"}],["meta",{"property":"og:description","content":"Kernel Modifications 提示 In most cases, only users with a server provided by OVH will need to make any modifications to their kernel. Update Kernel Install the new kernels using ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-17T00:57:54.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-17T00:57:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Kernel Modifications\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-17T00:57:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Update Kernel","slug":"update-kernel","link":"#update-kernel","children":[]},{"level":2,"title":"Confirm Kernel","slug":"confirm-kernel","link":"#confirm-kernel","children":[]},{"level":2,"title":"Set Default Boot","slug":"set-default-boot","link":"#set-default-boot","children":[]},{"level":2,"title":"Boot from hard disk","slug":"boot-from-hard-disk","link":"#boot-from-hard-disk","children":[]}],"git":{"createdTime":1532761043000,"updatedTime":1713315474000,"contributors":[{"name":"Jakob Schrettenbrunner","email":"dev@schrej.net","commits":1},{"name":"飒爽师叔","email":"43847794+vlssu@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":2.1,"words":629},"filePathRelative":"daemon/0.6/kernel_modifications.md","localizedDate":"2018年7月28日","autoDesc":true}');export{p as comp,h as data};
