import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as t,c as i,a as e,e as a,b as o,w as r,d,o as l}from"./app-BvxVCiO8.js";const c={},p=e("h1",{id:"upgrading-0-6-to-0-7",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#upgrading-0-6-to-0-7"},[e("span",null,"Upgrading 0.6 to 0.7")])],-1),h={class:"hint-container caution"},u=e("p",{class:"hint-container-title"},"This Version is End-of-Life",-1),m=e("p",null,[a("This documentation is for "),e("strong",null,"end-of-life software"),a(" which does not recieve any security updates or support from the community. This documentation has been left accessible for historial reasons.")],-1),v=d(`<h2 id="fetch-updated-files" tabindex="-1"><a class="header-anchor" href="#fetch-updated-files"><span>Fetch Updated Files</span></a></h2><p>The first step in the update process is to download the new panel files from GitHub. The command below will download the release archive for the most recent version of Pterodactyl and save it in the current directory. Now is a good time to ensure that you&#39;re in the <code>/var/www/pterodactyl</code> directory as the command below will automatically unpack in whatever directory you are currently in.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-L</span> https://github.com/pterodactyl/panel/releases/download/v0.7.19/panel.tar.gz <span class="token operator">|</span> <span class="token function">tar</span> --strip-components<span class="token operator">=</span><span class="token number">1</span> <span class="token parameter variable">-xzv</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Once all of the files are downloaded we need to set the correct permissions on the cache and storage directories to avoid any webserver related errors.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">755</span> storage/* bootstrap/cache
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="clear-compiled-assets" tabindex="-1"><a class="header-anchor" href="#clear-compiled-assets"><span>Clear Compiled Assets</span></a></h2><p>Previous versions of Pterodactyl attempted to cache your configuration file for speed and performance enhancements. This ended up just causing more headaches with minimal improvements in performance, so we decided to stop doing that. Running the command below will clear the cached files for you so we can continue with upgrading.</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>You probably only need to run this command once when upgrading from <code>0.6.X</code>. Once you&#39;re upgraded we don&#39;t cache the configuration file so there is no reason to remove anything.</p></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">rm</span> <span class="token parameter variable">-rf</span> bootstrap/cache/*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Once the configuration cache is removed, you&#39;ll need to clear the template cache to ensure users get the most recent templates.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>php artisan view:clear
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="update-dependencies" tabindex="-1"><a class="header-anchor" href="#update-dependencies"><span>Update Dependencies</span></a></h2><p>After you&#39;ve downloaded all of the new files you will need to upgrade the core components of the panel. To do this, simply run the commands below and follow any prompts.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">composer</span> <span class="token function">install</span> --no-dev --optimize-autoloader
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="update-environment" tabindex="-1"><a class="header-anchor" href="#update-environment"><span>Update Environment</span></a></h2><p>These scripts will display your current values in brackets. To keep the current values simply press enter and it will continue without making any modifications.</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>We&#39;ve changed our recommended cache driver to be Redis, rather than Memcached. If you&#39;re using Memcached you can continue doing so with no problems, however moving forward our installation documentation will only mention Redis.</p></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>php artisan p:environment:setup
php artisan p:environment:mail
php artisan p:environment:database
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="database-updates" tabindex="-1"><a class="header-anchor" href="#database-updates"><span>Database Updates</span></a></h2><div class="hint-container warning"><p class="hint-container-title">Backup your databases</p><p>The upgrade from <code>0.6</code> to <code>v0.7</code> includes some rather significant database changes. While the migration utility is able to handle everything for you, we still suggest taking a backup of your database before proceeding — just incase.</p></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>Running <code>db:seed</code> below will overwrite any changes you made to core Pterodactyl Nests, Eggs, or Egg Variables! This is unavoidable, and this seeder must be run. To avoid this in the future, please create custom nests, or create custom eggs for game variations.</p></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>php artisan migrate <span class="token parameter variable">--force</span>
php artisan db:seed <span class="token parameter variable">--force</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cleanup-api-keys" tabindex="-1"><a class="header-anchor" href="#cleanup-api-keys"><span>Cleanup API Keys</span></a></h2><p>A significant change is introduced in 0.7.0 that changes how API keys are used, stored, and validated. Due to this change, all previously created keys will no longer function. In order to keep things cleaned up you&#39;ll want to remove these orphaned keys. To do so, run the command below.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>php artisan p:migration:clean-orphaned-keys
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Don&#39;t forget to create new keys for yourself, as well as let all of your users know they&#39;ll need to do so as well.</p><h2 id="set-permissions" tabindex="-1"><a class="header-anchor" href="#set-permissions"><span>Set Permissions</span></a></h2><p>The last step is to set the proper owner of the files to be the user that runs your webserver. In most cases this is <code>www-data</code> but can vary from system to system — sometimes being <code>nginx</code>, <code>apache</code>, or even <code>nobody</code>.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># If using NGINX or Apache (not on CentOS):</span>
<span class="token function">chown</span> <span class="token parameter variable">-R</span> www-data:www-data * 

<span class="token comment"># If using NGINX on CentOS:</span>
<span class="token function">chown</span> <span class="token parameter variable">-R</span> nginx:nginx *

<span class="token comment"># If using Apache on CentOS</span>
<span class="token function">chown</span> <span class="token parameter variable">-R</span> apache:apache *
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,29);function g(b,f){const n=t("RouteLink");return l(),i("div",null,[p,e("div",h,[u,m,e("p",null,[a("You should be installing and using "),o(n,{to:"/panel/1.0/getting_started.html"},{default:r(()=>[a("Pterodactyl Panel 1.0")]),_:1}),a(" in production environments.")])]),v])}const k=s(c,[["render",g],["__file","0.6_to_0.7.html.vue"]]),_=JSON.parse('{"path":"/panel/0.7/upgrade/0.6_to_0.7.html","title":"Upgrading 0.6 to 0.7","lang":"zh-CN","frontmatter":{"description":"Upgrading 0.6 to 0.7 This Version is End-of-Life This documentation is for end-of-life software which does not recieve any security updates or support from the community. This d...","head":[["meta",{"property":"og:url","content":"https://pterodactyl.top/panel/0.7/upgrade/0.6_to_0.7.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"Upgrading 0.6 to 0.7"}],["meta",{"property":"og:description","content":"Upgrading 0.6 to 0.7 This Version is End-of-Life This documentation is for end-of-life software which does not recieve any security updates or support from the community. This d..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2021-02-25T04:30:39.000Z"}],["meta",{"property":"article:modified_time","content":"2021-02-25T04:30:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Upgrading 0.6 to 0.7\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2021-02-25T04:30:39.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Fetch Updated Files","slug":"fetch-updated-files","link":"#fetch-updated-files","children":[]},{"level":2,"title":"Clear Compiled Assets","slug":"clear-compiled-assets","link":"#clear-compiled-assets","children":[]},{"level":2,"title":"Update Dependencies","slug":"update-dependencies","link":"#update-dependencies","children":[]},{"level":2,"title":"Update Environment","slug":"update-environment","link":"#update-environment","children":[]},{"level":2,"title":"Database Updates","slug":"database-updates","link":"#database-updates","children":[]},{"level":2,"title":"Cleanup API Keys","slug":"cleanup-api-keys","link":"#cleanup-api-keys","children":[]},{"level":2,"title":"Set Permissions","slug":"set-permissions","link":"#set-permissions","children":[]}],"git":{"createdTime":1532324355000,"updatedTime":1614227439000,"contributors":[{"name":"Dane Everitt","email":"dane@daneeveritt.com","commits":4},{"name":"Jakob Schrettenbrunner","email":"dev@schrej.net","commits":1}]},"readingTime":{"minutes":2.23,"words":668},"filePathRelative":"panel/0.7/upgrade/0.6_to_0.7.md","localizedDate":"2018年7月23日","autoDesc":true}');export{k as comp,_ as data};
