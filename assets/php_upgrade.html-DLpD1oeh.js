import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,c as d,b as r,w as t,d as c,a as e,o as p,e as a}from"./app-BvxVCiO8.js";const m={},h=c(`<h1 id="升级-php" tabindex="-1"><a class="header-anchor" href="#升级-php"><span>升级 PHP</span></a></h1><p>此文档包含将您的系统升级到最新版本的 PHP 的说明。请参考下表以检查您的 Pterodactyl 版本需要哪个版本的 PHP。</p><table><thead><tr><th>面板版本</th><th>PHP 版本</th></tr></thead><tbody><tr><td>1.0.0 - 1.2.0</td><td>7.3, 7.4</td></tr><tr><td>1.3.0+</td><td>7.4, 8.0</td></tr><tr><td>1.8.0+</td><td>7.4, 8.0, 8.1</td></tr><tr><td>1.11.0+</td><td>8.0, 8.1</td></tr></tbody></table><h2 id="安装-php" tabindex="-1"><a class="header-anchor" href="#安装-php"><span>安装 PHP</span></a></h2><p>为了安装 PHP 8.1，您需要运行以下命令。请记住，不同的操作系统可能对此命令的格式有略微不同的要求。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 添加 PHP 的额外仓库</span>
add-apt-repository <span class="token parameter variable">-y</span> ppa:ondrej/php
<span class="token function">apt</span> <span class="token parameter variable">-y</span> update
<span class="token function">apt</span> <span class="token parameter variable">-y</span> <span class="token function">install</span> php8.1 php8.1-<span class="token punctuation">{</span>cli,gd,mysql,pdo,mbstring,tokenizer,bcmath,xml,fpm,curl,zip<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="更新-composer" tabindex="-1"><a class="header-anchor" href="#更新-composer"><span>更新 Composer</span></a></h2><p>从 <code>Panel@1.3.0</code> 开始，我们需要 <code>composer</code> v2。要更新 composer，您需要运行以下命令，该命令将执行 composer 自我更新过程，并将您切换到版本 2。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">composer</span> self-update <span class="token parameter variable">--2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="web服务器配置" tabindex="-1"><a class="header-anchor" href="#web服务器配置"><span>Web服务器配置</span></a></h2>`,10),u=e("p",null,[a("升级到 PHP 8.1 后，您可能需要更新您的 NGINX 配置。您的配置文件名称可能为 "),e("code",null,"pterodactyl.conf"),a("，位于 "),e("code",null,"/etc/nginx/sites-available/"),a(" 目录中，如果在 CentOS 上，则可能位于 "),e("code",null,"/etc/nginx/conf.d/"),a("。")],-1),b=e("p",null,"确保更新下面命令中的路径，以反映您的配置文件的实际位置。",-1),v=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"sed"),a(),e("span",{class:"token parameter variable"},"-i"),a(),e("span",{class:"token parameter variable"},"-e"),a(),e("span",{class:"token string"},"'s/php[7|8].[0-9]-fpm.sock/php8.1-fpm.sock/'"),a(` /etc/nginx/sites-available/pterodactyl.conf
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),P=e("p",null,"编辑完文件后，运行下面的命令重新加载 nginx 并应用您的更改。",-1),g=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,`systemctl reload nginx
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),_=e("p",null,"运行下面的命令，禁用所有以前的 PHP 版本，并在服务请求时启用 PHP 8.1。",-1),y=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token comment"},"# Hint: a2dismod = a2_disable_module 🤯"),a(`
a2dismod php*

`),e("span",{class:"token comment"},"# Hint: a2enmod = a2_enable_module 🤯"),a(`
a2enmod php8.1

`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),x=e("h3",{id:"返回到-1-x-x-升级指南",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#返回到-1-x-x-升级指南"},[e("span",null,[e("a",{href:"../panel/1.0/updating#%E6%9B%B4%E6%96%B0%E4%BE%9D%E8%B5%96%E9%A1%B9"},"返回到 1.X.X 升级指南")])])],-1);function f(k,H){const i=o("Tabs");return p(),d("div",null,[h,r(i,{id:"69",data:[{id:"NGINX"},{id:"Apache"}]},{title0:t(({value:s,isActive:n})=>[a("NGINX")]),title1:t(({value:s,isActive:n})=>[a("Apache")]),tab0:t(({value:s,isActive:n})=>[u,b,v,P,g]),tab1:t(({value:s,isActive:n})=>[_,y]),_:1}),x])}const w=l(m,[["render",f],["__file","php_upgrade.html.vue"]]),C=JSON.parse('{"path":"/guides/php_upgrade.html","title":"升级 PHP","lang":"zh-CN","frontmatter":{"description":"升级 PHP 此文档包含将您的系统升级到最新版本的 PHP 的说明。请参考下表以检查您的 Pterodactyl 版本需要哪个版本的 PHP。 安装 PHP 为了安装 PHP 8.1，您需要运行以下命令。请记住，不同的操作系统可能对此命令的格式有略微不同的要求。 更新 Composer 从 Panel@1.3.0 开始，我们需要 composer v2...","head":[["meta",{"property":"og:url","content":"https://pterodactyl.top/guides/php_upgrade.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"升级 PHP"}],["meta",{"property":"og:description","content":"升级 PHP 此文档包含将您的系统升级到最新版本的 PHP 的说明。请参考下表以检查您的 Pterodactyl 版本需要哪个版本的 PHP。 安装 PHP 为了安装 PHP 8.1，您需要运行以下命令。请记住，不同的操作系统可能对此命令的格式有略微不同的要求。 更新 Composer 从 Panel@1.3.0 开始，我们需要 composer v2..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-20T16:15:14.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-20T16:15:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"升级 PHP\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-20T16:15:14.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"安装 PHP","slug":"安装-php","link":"#安装-php","children":[]},{"level":2,"title":"更新 Composer","slug":"更新-composer","link":"#更新-composer","children":[]},{"level":2,"title":"Web服务器配置","slug":"web服务器配置","link":"#web服务器配置","children":[{"level":3,"title":"返回到 1.X.X 升级指南","slug":"返回到-1-x-x-升级指南","link":"#返回到-1-x-x-升级指南","children":[]}]}],"git":{"createdTime":1611207575000,"updatedTime":1713629714000,"contributors":[{"name":"Matthew Penner","email":"me@matthewp.io","commits":3},{"name":"飒爽师叔","email":"43847794+vlssu@users.noreply.github.com","commits":3},{"name":"Alex","email":"admin@softwarenoob.com","commits":2},{"name":"Dane Everitt","email":"dane@daneeveritt.com","commits":2},{"name":"Boy132","email":"Boy132@users.noreply.github.com","commits":1},{"name":"DaneEveritt","email":"dane@daneeveritt.com","commits":1},{"name":"Proxymiity ☆","email":"commits@proxymiity.fr","commits":1}]},"readingTime":{"minutes":1.27,"words":380},"filePathRelative":"guides/php_upgrade.md","localizedDate":"2021年1月21日","autoDesc":true}');export{w as comp,C as data};
