import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,c as r,a as e,e as n,b as a,w as t,d as o,o as d}from"./app-C2bos15_.js";const c="/assets/daemon_configuration_example-Dq0mqY72.png",p={},u=e("h1",{id:"installation",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#installation"},[e("span",null,"Installation")])],-1),m={class:"hint-container caution"},h=e("p",{class:"hint-container-title"},"This Software is Abandoned",-1),g=e("p",null,[n("This documentation is for "),e("strong",null,"abandoned software"),n(" which does not recieve any security updates or support from the community. This documentation has been left accessible for historial reasons.")],-1),b={class:"hint-container warning"},v=e("p",{class:"hint-container-title"},"注意",-1),f=e("strong",null,"must not be used for Pterodactyl v1.0",-1),y=e("h2",{id:"supported-systems",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#supported-systems"},[e("span",null,"Supported Systems")])],-1),k=e("thead",null,[e("tr",null,[e("th",null,"Operating System"),e("th",null,"Version"),e("th",{style:{"text-align":"center"}},"Supported"),e("th",null,"Notes")])],-1),_=e("tr",null,[e("td",null,[e("strong",null,"Ubuntu")]),e("td",null,"18.04"),e("td",{style:{"text-align":"center"}},"✅"),e("td",null,"Documentation written assuming Ubuntu 18.04 as the base OS.")],-1),w=e("td",null,null,-1),x=e("td",{style:{"text-align":"center"}},"✅",-1),D=e("td",null,null,-1),S=e("td",null,[e("strong",null,"CentOS")],-1),I=e("td",{style:{"text-align":"center"}},"⚠️",-1),T=e("td",null,"Extra repos are required",-1),C=e("td",null,null,-1),N=e("td",{style:{"text-align":"center"}},"✅",-1),O=e("td",null,null,-1),P=e("td",null,[e("strong",null,"Debian")],-1),L=e("td",{style:{"text-align":"center"}},"✅",-1),z=e("td",null,null,-1),j=e("td",null,null,-1),q=e("td",{style:{"text-align":"center"}},"✅",-1),E=e("td",null,null,-1),V=o(`<h2 id="system-requirements" tabindex="-1"><a class="header-anchor" href="#system-requirements"><span>System Requirements</span></a></h2><p>In order to run the Daemon you will need a system capable of running Docker containers. Most VPS and almost all dedicated servers should be capable of running Docker, but there are edge cases.</p><p>If your provider makes use of <code>Virtuozzo</code>, <code>OpenVZ</code> (or <code>OVZ</code>), or <code>LXC</code> then you will most likely be unable to run the Daemon. If you are unsure what your host is using there are a couple of options. The easiest is to check their website, or reach out to their support team.</p><p>If you want to take a different approach, try using <code>lscpu</code> and checking what the virtualization type listed is. An example of this is shown below which shows my hypervisor running with full virtualization — this means it will support Docker without issues. If you see <code>KVM</code> for the vendor, chances are you&#39;re fine as well.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">dane@daemon:~$ lscpu <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&#39;vendor\\|type&#39;</span></span>
<span class="line">Hypervisor vendor:     VMware</span>
<span class="line">Virtualization type:   full</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If that doesn&#39;t work for some reason, or you&#39;re still unsure, you can also run the command below and as long as it doesn&#39;t report <code>Xen</code> or <code>LXC</code> you&#39;re probably okay to continue.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">dane@daemon:~$ <span class="token function">sudo</span> dmidecode <span class="token parameter variable">-s</span> system-manufacturer</span>
<span class="line">VMware, Inc.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dependencies" tabindex="-1"><a class="header-anchor" href="#dependencies"><span>Dependencies</span></a></h2><p>Pterodactyl&#39;s Daemon requires the following dependencies be installed on your system in order for it to operate.</p><ul><li>Docker</li><li>Nodejs (<code>v10</code>, <code>v12</code>, higher versions likely work, but are untested)</li><li><code>node-gyp</code></li><li><code>tar</code></li><li><code>unzip</code></li><li><code>make</code>, <code>gcc</code> (<code>gcc-c++</code> on CentOS), <code>g++</code></li><li><code>python</code></li></ul><h3 id="installing-docker" tabindex="-1"><a class="header-anchor" href="#installing-docker"><span>Installing Docker</span></a></h3><p>For a quick install of Docker CE, you can execute the command below:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-sSL</span> https://get.docker.com/ <span class="token operator">|</span> <span class="token assign-left variable">CHANNEL</span><span class="token operator">=</span>stable <span class="token function">bash</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>If you would rather do a manual installation, please reference the official Docker documentation for how to install Docker CE on your server. Some quick links are listed below for commonly supported systems.</p><ul><li><a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-docker-ce" target="_blank" rel="noopener noreferrer">Ubuntu</a></li><li><a href="https://docs.docker.com/install/linux/docker-ce/centos/#install-docker-ce" target="_blank" rel="noopener noreferrer">CentOS</a></li><li><a href="https://docs.docker.com/install/linux/docker-ce/debian/#install-docker-ce" target="_blank" rel="noopener noreferrer">Debian</a></li></ul>`,15),A={class:"hint-container warning"},U=e("p",{class:"hint-container-title"},"Check your Kernel",-1),M=e("code",null,"uname -r",-1),R=e("code",null,"-xxxx-grs-ipv6-64",-1),B=e("code",null,"-xxxx-mod-std-ipv6-64",-1),W=o(`<h4 id="start-docker-on-boot" tabindex="-1"><a class="header-anchor" href="#start-docker-on-boot"><span>Start Docker on Boot</span></a></h4><p>If you are on an operating system with systemd (Ubuntu 16+, Debian 8+, CentOS 7+) run the command below to have Docker start when you boot your machine.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="enabling-swap" tabindex="-1"><a class="header-anchor" href="#enabling-swap"><span>Enabling Swap</span></a></h4><p>On most systems, docker will be unable to setup swap space, you can check if this is the case by running <code>docker info</code>. If it outputs <code>WARNING: No swap limit support</code> near the bottom, this is the case. Enabling swap is completely optional, but we recommended doing it if you will be hosting for others, and to prevent OOM errors.</p><p>To do so, open <code>/etc/default/grub</code> as a root user, and find the line starting with <code>GRUB_CMDLINE_LINUX_DEFAULT</code>. Make sure the line includes <code>swapaccount=1</code>.</p><p>After doing that, simply run <code>sudo update-grub</code> followed by <code>sudo reboot</code> to restart the server and have swap enabled. Below is an example of what the line should look like, <em>do not copy this line verbatium, it often has additional OS specific parameters.</em></p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot;swapaccount=1&quot;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="installing-nodejs" tabindex="-1"><a class="header-anchor" href="#installing-nodejs"><span>Installing Nodejs</span></a></h3><p>NodeJS is also super easy to install! Simply run the command below to make the package accessible to your system.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-sL</span> https://deb.nodesource.com/setup_10.x <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token parameter variable">-E</span> <span class="token function">bash</span> -</span>
<span class="line"><span class="token function">apt</span> <span class="token parameter variable">-y</span> <span class="token function">install</span> nodejs <span class="token function">make</span> gcc g++</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Other OS Distributions</p><p>If you are using CentOS, <a href="https://nodejs.org/en/download/package-manager/#enterprise-linux-and-fedora" target="_blank" rel="noopener noreferrer">please follow these instructions</a>. Ubuntu and Debian users may also follow the <a href="https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions" target="_blank" rel="noopener noreferrer">official instructions provided by Nodejs</a>.</p></div><h2 id="installing-daemon-software" tabindex="-1"><a class="header-anchor" href="#installing-daemon-software"><span>Installing Daemon Software</span></a></h2>`,13),Y={class:"hint-container caution"},F=e("p",{class:"hint-container-title"},"This Software is Abandoned",-1),X=e("p",null,[n("This documentation is for "),e("strong",null,"abandoned software"),n(" which does not recieve any security updates or support from the community. This documentation has been left accessible for historial reasons.")],-1),Z=o(`<p>The first step for installing the daemon is to make sure we have the required directory structure setup. To do so, run the commands below.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /srv/daemon /srv/daemon-data</span>
<span class="line"><span class="token builtin class-name">cd</span> /srv/daemon</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">OVH/SYS Servers</p><p>If you are using a server provided by OVH or SoYouStart please be aware that your main drive space is probably allocated to <code>/home</code>, and not <code>/</code> by default. Please consider using <code>/home/daemon-data</code> for server data. This can be easily set when creating the node.</p></div><p>The next step is to download the software and unpack the archive.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-L</span> https://github.com/pterodactyl/daemon/releases/download/v0.6.13/daemon.tar.gz <span class="token operator">|</span> <span class="token function">tar</span> --strip-components<span class="token operator">=</span><span class="token number">1</span> <span class="token parameter variable">-xzv</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Finally, we need to install the dependencies that allow the Daemon to run properly. This command will most likely take a few minutes to run, please do not interrupt it.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--only</span><span class="token operator">=</span>production --no-audit --unsafe-perm</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="configure-daemon" tabindex="-1"><a class="header-anchor" href="#configure-daemon"><span>Configure Daemon</span></a></h2><p>Once you have installed the daemon and required components, the next step is to create a node on your installed Panel Once you have done that there will be a tab called Configuration when you view the node.</p><p>Simply copy and paste the code block and paste it into a file called <code>core.json</code> in <code>/srv/daemon/config</code> and save it. You may also use the Auto-Deployment feature rather than manually creating the files.</p><figure><img src="`+c+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="starting-the-daemon" tabindex="-1"><a class="header-anchor" href="#starting-the-daemon"><span>Starting the Daemon</span></a></h2><p>To start your daemon simply move into the daemon directory and run the command below which will start the daemon in foreground mode. Once you are done, use <code>CTRL+C</code> to terminate the process. Depending on your server&#39;s internet connection pulling and starting the Daemon for the first time may take a few minutes.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">sudo</span> <span class="token function">npm</span> start</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="daemonizing-using-systemd" tabindex="-1"><a class="header-anchor" href="#daemonizing-using-systemd"><span>Daemonizing (using systemd)</span></a></h3><p>Running Pterodactyl Daemon in the background is a simple task, just make sure that it runs without errors before doing this. Place the contents below in a file called <code>wings.service</code> in the <code>/etc/systemd/system</code> directory.</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">[Unit]</span>
<span class="line">Description=Pterodactyl Wings Daemon</span>
<span class="line">After=docker.service</span>
<span class="line"></span>
<span class="line">[Service]</span>
<span class="line">User=root</span>
<span class="line">#Group=some_group</span>
<span class="line">WorkingDirectory=/srv/daemon</span>
<span class="line">LimitNOFILE=4096</span>
<span class="line">PIDFile=/var/run/wings/daemon.pid</span>
<span class="line">ExecStart=/usr/bin/node /srv/daemon/src/index.js</span>
<span class="line">Restart=on-failure</span>
<span class="line">StartLimitInterval=600</span>
<span class="line"></span>
<span class="line">[Install]</span>
<span class="line">WantedBy=multi-user.target</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then, run the commands below to reload systemd and start the daemon.</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> wings</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,19);function G(H,K){const s=l("RouteLink");return d(),r("div",null,[u,e("div",m,[h,g,e("p",null,[n("You should be installing and using "),a(s,{to:"/wings/1.0/installing.html"},{default:t(()=>[n("Wings")]),_:1}),n(" in production environments with "),a(s,{to:"/panel/1.0/getting_started.html"},{default:t(()=>[n("Pterodactyl Panel 1.0")]),_:1}),n(".")])]),e("div",b,[v,e("p",null,[n("This specific software is for Pterodactyl v0.7 and "),f,n(". If you have installed 1.0 you should use "),a(s,{to:"/wings/1.0/installing.html"},{default:t(()=>[n("Wings")]),_:1}),n(" instead.")])]),y,e("table",null,[k,e("tbody",null,[_,e("tr",null,[w,e("td",null,[a(s,{to:"/community/installation-guides/daemon/ubuntu2004.html"},{default:t(()=>[n("20.04")]),_:1})]),x,D]),e("tr",null,[S,e("td",null,[a(s,{to:"/community/installation-guides/daemon/centos7.html"},{default:t(()=>[n("7")]),_:1})]),I,T]),e("tr",null,[C,e("td",null,[a(s,{to:"/community/installation-guides/daemon/centos8.html"},{default:t(()=>[n("8")]),_:1})]),N,O]),e("tr",null,[P,e("td",null,[a(s,{to:"/community/installation-guides/daemon/debian9.html"},{default:t(()=>[n("9")]),_:1})]),L,z]),e("tr",null,[j,e("td",null,[a(s,{to:"/community/installation-guides/daemon/debian10.html"},{default:t(()=>[n("10")]),_:1})]),q,E])])]),V,e("div",A,[U,e("p",null,[n("Please be aware that some hosts install a modified kernel that does not support important docker features. Please check your kernel by running "),M,n(". If your kernel ends in "),R,n(" or "),B,n(" you're probably using a non-supported kernel. Check our "),a(s,{to:"/daemon/0.6/kernel_modifications.html"},{default:t(()=>[n("Kernel Modifications")]),_:1}),n(" guide for details.")])]),W,e("div",Y,[F,X,e("p",null,[n("You should be installing and using "),a(s,{to:"/wings/1.0/installing.html"},{default:t(()=>[n("Wings")]),_:1}),n(" in production environments with "),a(s,{to:"/panel/1.0/getting_started.html"},{default:t(()=>[n("Pterodactyl Panel 1.0")]),_:1}),n(".")])]),Z])}const Q=i(p,[["render",G],["__file","installing.html.vue"]]),ee=JSON.parse('{"path":"/daemon/0.6/installing.html","title":"Installation","lang":"zh-CN","frontmatter":{"description":"Installation This Software is Abandoned This documentation is for abandoned software which does not recieve any security updates or support from the community. This documentatio...","head":[["meta",{"property":"og:url","content":"https://pterodactyl.top/daemon/0.6/installing.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"Installation"}],["meta",{"property":"og:description","content":"Installation This Software is Abandoned This documentation is for abandoned software which does not recieve any security updates or support from the community. This documentatio..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-17T00:57:54.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-17T00:57:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Installation\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-17T00:57:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Supported Systems","slug":"supported-systems","link":"#supported-systems","children":[]},{"level":2,"title":"System Requirements","slug":"system-requirements","link":"#system-requirements","children":[]},{"level":2,"title":"Dependencies","slug":"dependencies","link":"#dependencies","children":[{"level":3,"title":"Installing Docker","slug":"installing-docker","link":"#installing-docker","children":[]},{"level":3,"title":"Installing Nodejs","slug":"installing-nodejs","link":"#installing-nodejs","children":[]}]},{"level":2,"title":"Installing Daemon Software","slug":"installing-daemon-software","link":"#installing-daemon-software","children":[]},{"level":2,"title":"Configure Daemon","slug":"configure-daemon","link":"#configure-daemon","children":[]},{"level":2,"title":"Starting the Daemon","slug":"starting-the-daemon","link":"#starting-the-daemon","children":[{"level":3,"title":"Daemonizing (using systemd)","slug":"daemonizing-using-systemd","link":"#daemonizing-using-systemd","children":[]}]}],"git":{"createdTime":1532758053000,"updatedTime":1713315474000,"contributors":[{"name":"Charles Morgan","email":"sir3lit@gmail.com","commits":2},{"name":"Dane Everitt","email":"dane@daneeveritt.com","commits":2},{"name":"AreYouScared","email":"sir3lit@gmail.com","commits":1},{"name":"Jakob Schrettenbrunner","email":"dev@schrej.net","commits":1},{"name":"Omar Kamel","email":"30291302+TekExplorer@users.noreply.github.com","commits":1},{"name":"ThatProgrammer","email":"35084698+ThatProgrammerCL@users.noreply.github.com","commits":1},{"name":"飒爽师叔","email":"43847794+vlssu@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":3.92,"words":1175},"filePathRelative":"daemon/0.6/installing.md","localizedDate":"2018年7月28日","autoDesc":true}');export{Q as comp,ee as data};
