import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as s,d as a}from"./app-CxUaffK2.js";const t={},n=a(`<h1 id="docker-on-debian-8" tabindex="-1"><a class="header-anchor" href="#docker-on-debian-8"><span>Docker on Debian 8</span></a></h1><div class="hint-container warning"><p class="hint-container-title">注意</p><p>There is a potential for broken software after this upgrade as we are moving to a non-stable kernel (in regards to mainline Debian). Please take backups and only proceed if you are comfortable with this process.</p></div><h2 id="install-docker" tabindex="-1"><a class="header-anchor" href="#install-docker"><span>Install Docker</span></a></h2><p>To begin with, we&#39;re going to install docker just like we would for any other OS by following Docker&#39;s <a href="https://docs.docker.com/install/linux/docker-ce/debian/#install-docker-ce" target="_blank" rel="noopener noreferrer">official documentation for Debian</a>.</p><p>Once you&#39;ve done that, if you run <code>docker info</code> you&#39;ll notice some missing features at the bottom, something like the output below.</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>WARNING: No memory limit support</span></span>
<span class="line"><span>WARNING: No swap limit support</span></span>
<span class="line"><span>WARNING: No kernel memory limit support</span></span>
<span class="line"><span>WARNING: No oom kill disable support</span></span>
<span class="line"><span>WARNING: No cpu cfs quota support</span></span>
<span class="line"><span>WARNING: No cpu cfs period support</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="update-grub-startup" tabindex="-1"><a class="header-anchor" href="#update-grub-startup"><span>Update GRUB Startup</span></a></h2><p>To fix the memory limit support issues, we just need to add two arguments to our default grub startup. Start by opening <code>/etc/default/grub</code> and adding the following arguments to <code>GRUB_CMDLINE_LINUX_DEFAULT</code>.</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>swapaccount=1 cgroup_enable=memory</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>The line should then look like the one below — assuming nothing else was in the quote to begin with.</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" data-title="text" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>GRUB_CMDLINE_LINUX_DEFAULT=&quot;swapaccount=1 cgroup_enable=memory&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>After doing that, run <code>sudo update-grub</code> to update our grub configuration.</p><h2 id="add-backports-repo" tabindex="-1"><a class="header-anchor" href="#add-backports-repo"><span>Add Backports Repo</span></a></h2><p>We then need to enable the <code>jessie-backports</code> apt repository to install a newer kernel. To do this, run the commands below.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> deb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> http://http.debian.net/debian</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> jessie-backports</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> main</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/sources.list.d/jessie-backports.list</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> deb</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> http://http.debian.net/debian</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> jessie-backports</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> main</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> contrib</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> non-free</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/apt/sources.list.d/jessie-backports.list</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To find the most recent kernels, run <code>apt-cache search linux-image</code> which will list all of the ones available. In this case, we&#39;ll install the <code>4.9.0</code> kernel using the command below. Once we&#39;ve done that, it is time to reboot the server to start using this kernel.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> jessie-backports</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> linux-image-4.9.0-0.bpo.3-amd64</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">reboot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="update-software-setup-docker" tabindex="-1"><a class="header-anchor" href="#update-software-setup-docker"><span>Update Software &amp; Setup Docker</span></a></h2><p>Now that we&#39;re on the new kernel you probably need to update some software to take advantage of it. To do this, simply run the command below.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">apt</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> upgrade</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Once that is done, we need to make an adjustment to docker to use <code>overlay2</code> rather than <code>aufs</code> since <code>aufs</code> is not supported on this kernel currently. Run the command below to do so.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &#39;s,/usr/bin/dockerd,/usr/bin/dockerd --storage-driver=overlay2,g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /lib/systemd/system/docker.service</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Finally, update <code>systemd</code> and start docker using the following commands.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">service</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> start</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Docker should now be running and reporting no errors if you run <code>docker info</code>!</p>`,25),r=[n];function l(d,o){return s(),i("div",null,r)}const c=e(t,[["render",l],["__file","debian_8_docker.html.vue"]]),k=JSON.parse('{"path":"/daemon/0.6/debian_8_docker.html","title":"Docker on Debian 8","lang":"zh-CN","frontmatter":{"description":"Docker on Debian 8 注意 There is a potential for broken software after this upgrade as we are moving to a non-stable kernel (in regards to mainline Debian). Please take backups an...","head":[["meta",{"property":"og:url","content":"https://pterodactyl.top/daemon/0.6/debian_8_docker.html"}],["meta",{"property":"og:site_name","content":"Pterodactyl-China"}],["meta",{"property":"og:title","content":"Docker on Debian 8"}],["meta",{"property":"og:description","content":"Docker on Debian 8 注意 There is a potential for broken software after this upgrade as we are moving to a non-stable kernel (in regards to mainline Debian). Please take backups an..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-17T00:57:54.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-17T00:57:54.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Docker on Debian 8\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-17T00:57:54.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"Install Docker","slug":"install-docker","link":"#install-docker","children":[]},{"level":2,"title":"Update GRUB Startup","slug":"update-grub-startup","link":"#update-grub-startup","children":[]},{"level":2,"title":"Add Backports Repo","slug":"add-backports-repo","link":"#add-backports-repo","children":[]},{"level":2,"title":"Update Software & Setup Docker","slug":"update-software-setup-docker","link":"#update-software-setup-docker","children":[]}],"git":{"createdTime":1532761043000,"updatedTime":1713315474000,"contributors":[{"name":"Jakob Schrettenbrunner","email":"dev@schrej.net","commits":1},{"name":"飒爽师叔","email":"43847794+vlssu@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":1.46,"words":437},"filePathRelative":"daemon/0.6/debian_8_docker.md","localizedDate":"2018年7月28日","autoDesc":true}');export{c as comp,k as data};
